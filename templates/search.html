{% extends "layout.html" %}
{% block title %}
    etsi
{% endblock %}
{% block content %}

Etsi 
<form action="/search" method="GET">
<input type=radio name="type" value="forum_message"> keskustelusisältöä 
<input type=radio name="type" value="username"> käyttäjänimeä 
<input type=radio name="type" value="private_message"> yksityisviestiä<br>
<p>
<input type="text" name="query"> 
<input type="submit" value="hae"> <br>
</form>
</p>
<p>
    {% if search_type["username"] and found %}
    osumat:
    <p>
    <ul>
        {% for r in results %}
        <li><a href="/profile/{{r.id}}">{{r.name}}</a><br>
        {% endfor %}
    </ul>

    {% elif search_type["forum_message"] and found %}
    osumat:
    <p>
        <ul>
        {% for r in results %}
            <li>
                foorumi: <a href="/forum/{{r.forum_id}}">{{r.forum}}</a> 
                keskustelu: <a href="/profile/{{r.forum_id}}/{{r.topic_id}}">{{r.topic}}</a><br>
                käyttäjä: <a href="/profile/{{r.user_id}}">{{r.username}}</a> 
                aika: {{r.timestamp.strftime("%Y-%m-%d %H:%M:%S")}}<br>
                <p>{{r.content}}
            </li>
        {% endfor %}
        </ul>
    {% elif search_type["private_message"] and found %}
    osumat:
    <ul>
        {% for r in results %}
        <li>
            käyttäjä: <a href="/profile/{{r.user_id}}">{{r.username}}</a> 
            aika: {{r.timestamp.strftime("%Y-%m-%d %H:%M:%S")}}<br>
            <a href="/conversation/{{r.sender_id}}">keskustelu</a>
            <p>{{r.content}}
        </li>
        {% endfor %}
    </ul>
    {% elif searched and not found %}
    ei osumia
{% endif %}

{% endblock %}